# Logging

CASA uses the [`debug`](https://www.npmjs.com/package/debug) module to provide simple debug logs during development of your application, providing logs on namespaces listed below. To enable CASA logging, simply set the exeucting shell's `DEBUG` environment variable as so:

```bash
# (1) Export so all subsequent programs receive DEBUG
export DEBUG=casa*
npm start

# (2) Or just include on same line
DEBUG=casa* npm start
```

Each namespace is suffixed by each of the standard loglevels, `info`, `error`, `warn`, `fatal`, `debug`, `trace`. For example, `casa:i18n:info`.

| Namespace           | Description  | Source(s) |
|---------------------|--------------|-----------|
| `casa:boot:*`       | Bootstrapping messages | `casa.js`, `lib/Casa.js` |
| `casa:headers:*`    | HTTP headers info | `middleware/headers/` |
| `casa:i18n:*`       | Language and locales | `lib/I18n.js`, `middleware/i18n/` |
| `casa:journey:*`    | User journey information | `middleware/journey/`, `middleware/mount/` |
| `casa:nunjucks:*`   | Template logs (rendering errors, etc) | `middleware/nunjucks/` |
| `casa:errors:*`     | General routes errors and exceptions, such as `404`, `500`, etc. | `middleware/errors/` |
| `casa:session:*`    | Session information | `middlware/session/` |
| `casa:static:*`     | Static assets generated by CASA | `middleware/static/` |
| `casa:page.*:*`     | Logs for CASA's default `GET`/`POST` route handlers | `middleware/page/index.js` |
| `casa:util:*`       | Logs from utilitiy functions | `lib/Util.js` |

## Using the Logger

```javascript
// Create a new logger with namespace `my-namespace`
const logger = require('@dwp/govuk-casa/lib/Logger.js')('my-namespace');

// Optionally append a session identifier to all log messages
logger.setSessionId('abc123');

// Emit logs
logger.info('The quick brown fox');
logger.warn('Jumps over the lazy dog');
```

```bash
# Output ...
casa:my-namespace:info The quick brown fox [session: abc123] +1ms
casa:my-namespace:warn Jumps over the lazy dog [session: abc123] +1ms
```
