{% extends "casa/review/page-block.njk" %}

{% from "components/summary-list/macro.njk" import govukSummaryList %}

{% block pageBlockTitle %}
  {{ t('work-impact:h1') }}
{% endblock %}

{% block journeyWaypointId %}
  work-impact
{% endblock %}

{% block reviewBlock %}
  {% set pData = journeyData['work-impact'] %}

  {% set rows = [{
    key: {
      text: t('work-impact:moreDifficult.label')
    },
    value: {
      text: pData.moreDifficult
    },
    actions: {
      items: [
        {
          href: changeUrlPrefix + waypointId + '?edit&editorigin=' + editOriginUrl + '#f-moreDifficult',
          text: t('review:block.changeLink'),
          visuallyHiddenText: t('work-impact:moreDifficult.label') | lower,
          classes: 'govuk-link--no-visited-state'
        }
      ]
    }
  }] %}

  {% if pData.moreDifficult == 'yes' %}
    {% set rows = (rows.push(
      {
        key: {
          text: t('work-impact:harderHow.label')
        },
        value: {
          text: pData.harderHow
        },
        actions: {
          items: [
            {
              href: changeUrlPrefix + waypointId + '?edit&editorigin=' + editOriginUrl + '#f-harderHow',
              text: t('review:block.changeLink'),
              visuallyHiddenText: t('work-impact:harderHow.label') | lower,
              classes: 'govuk-link--no-visited-state'
            }
          ]
        }
      },
      {
        key: {
          text: t('work-impact:getAroundProblems.label')
        },
        value: {
          text: pData.getAroundProblems
        },
        actions: {
          items: [
            {
              href: changeUrlPrefix + waypointId + '?edit&editorigin=' + editOriginUrl + '#f-getAroundProblems',
              text: t('review:block.changeLink'),
              visuallyHiddenText: t('work-impact:getAroundProblems.label') | lower,
              classes: 'govuk-link--no-visited-state'
            }
          ]
        }
      }
    ), rows) %}
    {% if pData.getAroundProblems == 'yes' %}
      {% set rows = (rows.push(
        {
          key: {
            text: t('work-impact:problemSolutions.label')
          },
          value: {
            text: pData.problemSolutions
          },
          actions: {
            items: [
              {
                href: changeUrlPrefix + waypointId + '?edit&editorigin=' + editOriginUrl + '#f-problemSolutions',
                text: t('review:block.changeLink'),
                visuallyHiddenText: t('work-impact:problemSolutions.label') | lower,
                classes: 'govuk-link--no-visited-state'
              }
            ]
          }
        }
      ), rows) %}
    {% endif %}
    {% set rows = (rows.push(
      {
        key: {
          text: t('work-impact:knowWhatWouldHelp.label')
        },
        value: {
          text: pData.knowWhatWouldHelp
        },
        actions: {
          items: [
            {
              href: changeUrlPrefix + waypointId + '?edit&editorigin=' + editOriginUrl + '#f-knowWhatWouldHelp',
              text: t('review:block.changeLink'),
              visuallyHiddenText: t('work-impact:knowWhatWouldHelp.label') | lower,
              classes: 'govuk-link--no-visited-state'
            }
          ]
        }
      }
    ), rows) %}
    {% if pData.knowWhatWouldHelp == 'yes' %}
      {% set rows = (rows.push(
        {
          key: {
            text: t('work-impact:whatWouldHelp.label')
          },
          value: {
            text: pData.whatWouldHelp
          },
          actions: {
            items: [
              {
                href: changeUrlPrefix + waypointId + '?edit&editorigin=' + editOriginUrl + '#f-whatWouldHelp',
                text: t('review:block.changeLink'),
                visuallyHiddenText: t('work-impact:whatWouldHelp.label') | lower,
                classes: 'govuk-link--no-visited-state'
              }
            ]
          }
        }
      ), rows) %}
    {% endif %}
  {% endif %}

  {{ govukSummaryList({
    classes: "govuk-!-margin-bottom-9 check-your-answers",
    rows: rows
  }) }}
{% endblock %}
