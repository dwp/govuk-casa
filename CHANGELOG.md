# Changelog

All notable changes to this project will be documented in this file. See [commit-and-tag-version](https://github.com/absolute-version/commit-and-tag-version) for commit guidelines.

## [8.16.2](https://github.com/dwp/govuk-casa/-/compare/8.16.1...8.16.2) (2024-10-10)

## [8.16.1](https://github.com/dwp/govuk-casa/-/compare/8.16.0...8.16.1) (2024-09-10)

## [8.16.0](https://github.com/dwp/govuk-casa/-/compare/8.15.3...8.16.0) (2024-08-07)

### Features

- add source of edit cancellation ([28a5746](https://github.com/dwp/govuk-casa/-/commit/28a574651f27d55c6583c71042f88ada42cb7cb2))

## [8.15.3](https://github.com/dwp/govuk-casa/-/compare/8.15.2...8.15.3) (2024-07-18)

## [8.15.2](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.15.1...8.15.2) (2024-04-04)

## [8.15.1](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.15.0...8.15.1) (2024-02-08)

## [8.15.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.14.3...8.15.0) (2024-02-06)

### Features

- enable tudor crown ([3a64814](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/commit/3a6481487c8fe7aba57f1e1d4243d7e565582268))

## [8.14.3](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.14.2...8.14.3) (2024-01-17)

## [8.14.2](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.14.1...8.14.2) (2023-12-20)

## [8.14.1](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.14.0...8.14.1) (2023-12-01)

### Bug Fixes

- handle non-reciprocal url:// waypoints correctly ([af44720](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/commit/af44720eda7c89ad6e4ad6a3c0a45f9d340c3309))

## [8.14.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/compare/8.13.0...8.14.0) (2023-11-21)

### Features

- replace lodash `cloneDeep` with `structuredClone` ([57d55a4](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/-/commit/57d55a4de71fd6b38fce0e749070bd2f774b4da6))

## [8.13.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.12.0...8.13.0) (2023-08-24)

### Features

- added errorVisibility feature ([d5b411d](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/d5b411d3a2a2874e1163dfaab9006f32ac9c381d))

## [8.12.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.11.1...8.12.0) (2023-07-12)

### Features

- add option to set a custom context ID generator ([ae56c11](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/ae56c11591e21e730d2ad309b9373b0347808ab6))

## [8.11.1](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.11.0...8.11.1) (2023-07-12)

## [8.11.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.10.2...8.11.0) (2023-06-22)

### Features

- add range validator ([3152a50](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/3152a50a0e503f69d1b83ca24faa13b06c51be30))
- use csrf-sync package for csrf ([f18418c](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/f18418c282516b7cd56c00b1515bf61bcfdd43f2))

## [8.10.2](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.10.1...8.10.2) (2023-05-16)

## [8.10.1](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.10.0...8.10.1) (2023-05-15)

### Bug Fixes

- serve govuk-frontend sourcemap ([b97779b](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/b97779bd69fd15ce7c7f186bb3017f39af494248))
- stop edit mode when reaching origin that includes contextid param ([c3166e4](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/c3166e441a1bbfc50fa909e0ef4bd4c9ff83b656))

## [8.10.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.9.2...8.10.0) (2023-05-03)

### Features

- add option to define max form params and payload size ([78a9907](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/78a99078839d9440e6a83ec605cff96b88b33c2d))

## [8.9.2](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.9.1...8.9.2) (2023-05-03)

### Bug Fixes

- **JourneyContext.d.ts:** import missing ContextEventUserInfo ([c175e78](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/c175e7863aeefb6acaf2d5e7e7a440e700f02068))

## [8.9.1](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.9.0...8.9.1) (2023-05-02)

## [8.9.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.8.0...8.9.0) (2023-04-25)

### Features

- allow contextid to be passed in editorigin and skipto ([0d97d68](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/0d97d689606ba40585b45d0317faa8a1ae464db4))
- allow user data to be passed to event handlers ([128f09b](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/128f09bb40fd3947be8bb8e43638e8330aa6decd))

### Bug Fixes

- include context id in back link ([68e4a27](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/68e4a27d99619055ae8f3781a3a724c8f983b393))

## [8.8.0](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.7.12...8.8.0) (2023-04-14)

### Features

- add data-ga-question tags to errors inside input macros ([cb6e277](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/cb6e2779ccc12b5ec2b0f7b60e926a01e8db3706))
- **components:** create casa component version of govuk ([c53fd99](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/c53fd996103b310cf97bfbe28f03d6da01a9a3d8))

### Bug Fixes

- update source maps sourceRoot ([3721b7d](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/3721b7dc9472ba5fa94e38d6a239d0fd6767d9a8))

## [8.7.12](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.7.11...8.7.12) (2023-03-28)

### Bug Fixes

- retain object type when merging ([916b92d](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/916b92d56f512f33edbee86e190639039186c8ad))

## [8.7.11](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.7.10...8.7.11) (2023-03-23)

## [8.7.10](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.7.9...8.7.10) (2023-03-06)

### Bug Fixes

- **typescript:** match function return type to that of superclass ([e358048](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/e35804866ba6e34737e47106591e18de57a47d2c))

## [8.7.9](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/compare/8.7.8...8.7.9) (2023-03-02)

## [8.7.8](https://github.com/dwp/govuk-casa/compare/8.7.7...8.7.8) (2023-01-24)

## [8.7.7](https://github.com/dwp/govuk-casa/compare/8.7.6...8.7.7) (2023-01-13)

## [8.7.6](https://github.com/dwp/govuk-casa/compare/8.7.5...8.7.6) (2023-01-09)

## [8.7.5](https://github.com/dwp/govuk-casa/compare/8.7.4...8.7.5) (2022-12-20)

## [8.7.4](https://github.com/dwp/govuk-casa/compare/8.7.3...8.7.4) (2022-12-15)

## [8.7.3](https://github.com/dwp/govuk-casa/compare/8.7.2...8.7.3) (2022-12-11)

## [8.7.2](https://github.com/dwp/govuk-casa/compare/8.7.1...8.7.2) (2022-11-28)

## [8.7.1](https://github.com/dwp/govuk-casa/compare/8.7.0...8.7.1) (2022-11-24)

## [8.7.0](https://github.com/dwp/govuk-casa/compare/8.6.0...8.7.0) (2022-11-23)

### Features

- throw if session.secure flag not defined ([936db37](https://github.com/dwp/govuk-casa/commit/936db370f0bbb2ccc538c0697fed4c3ec7243d42))

## [8.6.0](https://github.com/dwp/govuk-casa/compare/8.5.2...8.6.0) (2022-11-04)

### Features

- **better-typescript-support:** fixes and additions to types ([8dda905](https://github.com/dwp/govuk-casa/commit/8dda9050b53ee8a5f53c8f7c1cb4afa91df2e674))

## [8.5.2](https://github.com/dwp/govuk-casa/compare/8.5.1...8.5.2) (2022-10-31)

## [8.5.1](https://github.com/dwp/govuk-casa/compare/8.5.0...8.5.1) (2022-10-13)

## [8.5.0](https://github.com/dwp/govuk-casa/compare/8.4.0...8.5.0) (2022-09-22)

### Features

- refactor formatDateObject to allow custom date format ([cff1d95](https://github.com/dwp/govuk-casa/commit/cff1d957e084566606892be631dede1c9b0b1c3c))

## [8.4.0](https://github.com/dwp/govuk-casa/compare/8.3.0...8.4.0) (2022-07-19)

### Features

- clone field ([916f2f2](https://github.com/dwp/govuk-casa/commit/916f2f2497c4e8177a5a3b33b9b3e70aa9cd5dd1))

## [8.3.0](https://github.com/dwp/govuk-casa/compare/8.2.8...8.3.0) (2022-06-30)

### Features

- add support for complex field names ([a380b01](https://github.com/dwp/govuk-casa/commit/a380b01ce22b8b7957ad4950e4189cc404b5d9c5))

## [8.2.8](https://github.com/dwp/govuk-casa/compare/8.2.7...8.2.8) (2022-06-29)

## [8.2.7](https://github.com/dwp/govuk-casa/compare/8.2.6...8.2.7) (2022-06-15)

## [8.2.6](https://github.com/dwp/govuk-casa/compare/8.2.5...8.2.6) (2022-06-06)

## [8.2.5](https://github.com/dwp/govuk-casa/compare/8.2.3...8.2.5) (2022-06-01)

### Bug Fixes

- serve statics correctly from deeply nested apps ([0fd00a5](https://github.com/dwp/govuk-casa/commit/0fd00a5f10de28706afe87a993072d3184e3c7aa))

## [8.2.3](https://github.com/dwp/govuk-casa/compare/8.2.2...8.2.3) (2022-05-23)

## [8.2.2](https://github.com/dwp/govuk-casa/compare/8.2.1...8.2.2) (2022-05-23)

### Bug Fixes

- escape from sticky edit on return to edit origin in a proxied app ([9303af1](https://github.com/dwp/govuk-casa/commit/9303af140ec383801741d50f3404fd7cfe930d90))

## [8.2.1](https://github.com/dwp/govuk-casa/compare/8.2.0...8.2.1) (2022-05-20)

### Bug Fixes

- preserve compatibility with existing proxy mounting methods ([41040e6](https://github.com/dwp/govuk-casa/commit/41040e6ac891ec64ce4b70328dda333178c48b99))

## [8.2.0](https://github.com/dwp/govuk-casa/compare/8.1.0...8.2.0) (2022-05-17)

### Features

- add means to create empty epehemeral context ([3e6f0da](https://github.com/dwp/govuk-casa/commit/3e6f0dad41d4150f23746bedcb46e43b8aab312d))
- add support for a parameterised mounting point ([ecdecde](https://github.com/dwp/govuk-casa/commit/ecdecded7c69e689821afc8c5c7092e966566296)), closes [#87](https://github.com/dwp/govuk-casa/issues/87)
- automatically send user to first waypoint in journey ([2362d1a](https://github.com/dwp/govuk-casa/commit/2362d1a864aa3e87dbd6d8abdcdb09ad14580d8f))
- expose autocomplete attribute in form helper ([ba092b7](https://github.com/dwp/govuk-casa/commit/ba092b723389672e0ae45db149bdf5a61f2ab4f7)), closes [#60](https://github.com/dwp/govuk-casa/issues/60)
- pass session to context event handlers ([1e8218c](https://github.com/dwp/govuk-casa/commit/1e8218cc4b9e608982c3c8a2917683b5aa7ab48f))

## [8.1.0](https://github.com/dwp/govuk-casa/compare/8.0.3...8.1.0) (2022-03-11)

### Features

- add option to configure Helmet headers ([490ca73](https://github.com/dwp/govuk-casa/commit/490ca73854d59ea10c56b065828692bf65efd74c)), closes [#85](https://github.com/dwp/govuk-casa/issues/85)

### Bug Fixes

- ensure validation state deserialises to ValidationError instances ([e4dd0a9](https://github.com/dwp/govuk-casa/commit/e4dd0a9cb343da6629664a45c8d026d27089dc78)), closes [#86](https://github.com/dwp/govuk-casa/issues/86)

## [8.0.3](https://github.com/dwp/govuk-casa/compare/8.0.2...8.0.3) (2022-02-04)

### Bug Fixes

- add google analytics to default CSP ([6408140](https://github.com/dwp/govuk-casa/commit/6408140501c124221219def66094af9121935a1e))
- correct typo ([56e0c8d](https://github.com/dwp/govuk-casa/commit/56e0c8d5e1ae8843c4f309ddf5cb8299faf7aaa4))
- set 404 status code on 404 page render response ([2296a9d](https://github.com/dwp/govuk-casa/commit/2296a9dc01ae8aa00d5cb28c71e5ae718e782386))

## [8.0.2](https://github.com/dwp/govuk-casa/compare/8.0.1...8.0.2) (2022-01-14)

## [8.0.1](https://github.com/dwp/govuk-casa/compare/8.0.0...8.0.1) (2022-01-12)

## [8.0.0](https://github.com/dwp/govuk-casa/compare/7.0.8...8.0.0) (2021-12-21)

### ⚠ BREAKING CHANGES

- The framework has been rewritten. Refer to
  docs/migration-guides/MIGRATION_7.x-8.x.md for more details.

- rewrite framework ([48c44ec](https://gitlab.com/dwp/engineering/capture-and-submit-application/govuk-casa/commit/48c44ec78d9a93eb736e74f7b23b62b0898a1e1c))

## [7.0.8](https://github.com/dwp/govuk-casa/compare/7.0.7...7.0.8) (2021-12-10)

## [7.0.7](https://github.com/dwp/govuk-casa/compare/7.0.6...7.0.7) (2021-10-19)

### Bug Fixes

- **typescript:** add import for type definition ([c7bc531](https://github.com/dwp/govuk-casa/commit/c7bc531c9cab7c202dc0f6d34ac374128cf284ed))
- **typescript:** correct types for validation rules ([69d70c6](https://github.com/dwp/govuk-casa/commit/69d70c69a408c6ba42d3f4e075430659d97ffbeb))

## [7.0.6](https://github.com/dwp/govuk-casa/compare/7.0.5...7.0.6) (2021-09-28)

## [7.0.5](https://github.com/dwp/govuk-casa/compare/7.0.4...7.0.5) (2021-08-06)

## [7.0.4](https://github.com/dwp/govuk-casa/compare/7.0.3...7.0.4) (2021-08-05)

### Bug Fixes

- **journey-context-tags:** Bumped ecmaVersion in eslintrc and refactored getContextsByTag to use optional chaining ([3d6fcb0](https://github.com/dwp/govuk-casa/commit/3d6fcb04386f121cd7f9906d33c87354151e33be))
- **journey-context-tags:** Fixed bug where TypeError was thrown if a JC had no tags ([7e56c3e](https://github.com/dwp/govuk-casa/commit/7e56c3e4e2fa99010bb89f11ce187b05f487e33c))

## [7.0.3](https://github.com/dwp/govuk-casa/compare/7.0.2...7.0.3) (2021-06-10)

## [7.0.2](https://github.com/dwp/govuk-casa/compare/7.0.1...7.0.2) (2021-06-08)

### Bug Fixes

- move husky install to prepare stage ([dad2fde](https://github.com/dwp/govuk-casa/commit/dad2fde0c4e5d182750dab2782c3ac2518c909af))

## [7.0.1](https://github.com/dwp/govuk-casa/compare/7.0.0...7.0.1) (2021-06-07)

## [7.0.0](https://github.com/dwp/govuk-casa/compare/7.0.0-beta1...7.0.0) (2021-06-07)

## [7.0.0-beta1](https://github.com/dwp/govuk-casa/compare/6.8.4...7.0.0-beta1) (2021-03-18)

### Bug Fixes

- postalAddressObject welsh translations ([9f311ab](https://github.com/dwp/govuk-casa/commit/9f311ab618879648229d2e47a9640c986b45ba0c)), closes [#124](https://github.com/dwp/govuk-casa/issues/124)
- skip link only appears in English, even when browsing in Welsh ([a5ec074](https://github.com/dwp/govuk-casa/commit/a5ec074dc3b36f7894b8fb22d74b999cf53d1ac9))

### Code Refactoring

- [bc] add govuk/ prefix to nunjucks macros ([94012d8](https://github.com/dwp/govuk-casa/commit/94012d8bb33132fcccd680b23ab5f99ae1c072cc)), closes [#104](https://github.com/dwp/govuk-casa/issues/104)
- [bc] add sanitise sibling methods to validators ([1b15b27](https://github.com/dwp/govuk-casa/commit/1b15b27101780d8619a73de72bc2132c0e740bf3))
- [bc] replace moment with luxon ([d971882](https://github.com/dwp/govuk-casa/commit/d971882bfdef7be54a203bdfa6410803cd171f0a)), closes [#145](https://github.com/dwp/govuk-casa/issues/145)
- **plan:** [bc] change default route condition behaviour ([892ed4b](https://github.com/dwp/govuk-casa/commit/892ed4ba4af6f422e7a342f2f6086a005697d34f)), closes [#140](https://github.com/dwp/govuk-casa/issues/140)

### Features

- [bc] add support for ephemeral contexts ([e48242b](https://github.com/dwp/govuk-casa/commit/e48242bf356bd00a3547e760244da0fb63ea4240)), closes [#128](https://github.com/dwp/govuk-casa/issues/128)
- [bc] upgrade to latest node LTS version ([a4f1d24](https://github.com/dwp/govuk-casa/commit/a4f1d24b22792b2797392aa90abb9cb85f6b33f8)), closes [#145](https://github.com/dwp/govuk-casa/issues/145)
- add new wordCount validator ([f9a6a22](https://github.com/dwp/govuk-casa/commit/f9a6a226024ecd91e3186afe266cf6359b367eca))
- add translations for error pages ([e2a7db2](https://github.com/dwp/govuk-casa/commit/e2a7db205af29383f07a7ea661174439e442fdb3))
- style error pages using GovUK frontend ([eaf6ad2](https://github.com/dwp/govuk-casa/commit/eaf6ad224ca435e49fcb7a16de72ab246193055c)), closes [#151](https://github.com/dwp/govuk-casa/issues/151)

### BREAKING CHANGES

- Any existing templates will need to update their
  references to the govuk macros. See migration guide for details.
- Built-in validation rules are no longer simple
  functions so cannot be bound. See docs/migration-guides/MIGRATING-6.x-7.x.md
  for migration path.
- Large swathes of the codebase have changes, which has
  affected some of the public-facing API. See migrations notes in
  docs/migration-guides/MIGRATING-6.x-7.x.md
- this replaces the moment datetime library with the
  luxon datetime library
- Upgrade to node version 14 and set an minimum version
- **plan:** This differs to the existing default behaviour, where custom
  logic functions completely override those validation checks. The old behaviour
  can still be obtained by applying the "validateBeforeRouteCondition" flag on
  a Plan.

## [6.8.4](https://github.com/dwp/govuk-casa/compare/6.8.3...6.8.4) (2021-02-24)

### Bug Fixes

- add missing parser middleware ([75c457f](https://github.com/dwp/govuk-casa/commit/75c457fa81ad67dea451fcee8293430d07b94c9e))

## [6.8.3](https://github.com/dwp/govuk-casa/compare/6.8.2...6.8.3) (2021-02-23)

### Performance Improvements

- call field read/write function only if defined ([6d7765e](https://github.com/dwp/govuk-casa/commit/6d7765ef00b4f3488e3e7b6df7a0bfbeec9a37fd))

## [6.8.2](https://github.com/dwp/govuk-casa/compare/6.8.1...6.8.2) (2021-02-17)

### Bug Fixes

- reorder middleware to avoid errors when receiving sessionless POSTs ([84840a3](https://github.com/dwp/govuk-casa/commit/84840a30a28baefe6ecd3387aa30048db60e2f35))

## [6.8.1](https://github.com/dwp/govuk-casa/compare/6.8.0...6.8.1) (2020-12-10)

### Bug Fixes

- extract path from editorigin without querstring ([d5625b6](https://github.com/dwp/govuk-casa/commit/d5625b661bc0c267776dffb95960f8f9dd7a70a0))

## [6.8.0](https://github.com/dwp/govuk-casa/compare/6.7.2...6.8.0) (2020-10-23)

### Features

- option to make edit mode "sticky" until user is back on track ([4f9b397](https://github.com/dwp/govuk-casa/commit/4f9b39703c6facde376c9622f1d720042a7f4171)), closes [#95](https://github.com/dwp/govuk-casa/issues/95)

## [6.7.2](https://github.com/dwp/govuk-casa/compare/6.7.1...6.7.2) (2020-10-16)

## [6.7.1](https://github.com/dwp/govuk-casa/compare/6.7.0...6.7.1) (2020-10-08)

## [6.7.0](https://github.com/dwp/govuk-casa/compare/6.6.1...6.7.0) (2020-09-04)

### Features

- package SCSS files for users who wish to compile their own CSS ([79bd972](https://github.com/dwp/govuk-casa/commit/79bd972b100665553c7420c2161b5db02dd08ba6))

## [6.6.1](https://github.com/dwp/govuk-casa/compare/6.6.0...6.6.1) (2020-06-02)

### Performance Improvements

- moment is slow so removing from session expiry which is a hot path ([8c63f8d](https://github.com/dwp/govuk-casa/commit/8c63f8d))

## [6.6.0](https://github.com/dwp/govuk-casa/compare/6.5.0...6.6.0) (2020-05-26)

### Features

- add current language to journey context ([5b3e682](https://github.com/dwp/govuk-casa/commit/5b3e682))

## [6.5.0](https://github.com/dwp/govuk-casa/compare/6.4.1...6.5.0) (2020-05-13)

### Features

- add a default robots.txt file ([1ad9ed8](https://github.com/dwp/govuk-casa/commit/1ad9ed8))
- serve default, implicit favicon to browsers on root path ([58f9294](https://github.com/dwp/govuk-casa/commit/58f9294))

### Performance Improvements

- array concat is really slow, assign instead ([63f3ae6](https://github.com/dwp/govuk-casa/commit/63f3ae6))
- implement minor performance improvements in traversal methods ([e55fd70](https://github.com/dwp/govuk-casa/commit/e55fd70))
- might be faster to filter once rather than twice? Not measurable ([5177c4a](https://github.com/dwp/govuk-casa/commit/5177c4a))
- unnecessary reassign ([4db320a](https://github.com/dwp/govuk-casa/commit/4db320a))
- unnecessary spread ([b1565ed](https://github.com/dwp/govuk-casa/commit/b1565ed))
- wrap main code to avoid validating options every on every call ([9dfbcde](https://github.com/dwp/govuk-casa/commit/9dfbcde))

## [6.4.1](https://github.com/dwp/govuk-casa/compare/6.4.0...6.4.1) (2020-05-05)

### Performance Improvements

- user faster clone when reading page data ([45ba9e4](https://github.com/dwp/govuk-casa/commit/45ba9e4))

## [6.4.0](https://github.com/dwp/govuk-casa/compare/6.3.2...6.4.0) (2020-05-04)

### Features

- add option to check validation state during traversal ([210dfb0](https://github.com/dwp/govuk-casa/commit/210dfb0)), closes [#118](https://github.com/dwp/govuk-casa/issues/118)

## [6.3.2](https://github.com/dwp/govuk-casa/compare/6.3.1...6.3.2) (2020-04-28)

## [6.3.1](https://github.com/dwp/govuk-casa/compare/6.3.0...6.3.1) (2020-04-24)

### Bug Fixes

- changelog typo ([9f3103a](https://github.com/dwp/govuk-casa/commit/9f3103a))

## [6.3.0](https://github.com/dwp/govuk-casa/compare/6.2.0...6.3.0) (2020-04-24)

### Bug Fixes

- Welsh local for date macro had incorrect keys ([588c17b](https://github.com/dwp/govuk-casa/commit/588c17b))

### Features

- label graph edges with routing function name ([ddba1ba](https://github.com/dwp/govuk-casa/commit/ddba1ba))
- **components:** add wrapper for govukCharacterCount component ([0f4d54a](https://github.com/dwp/govuk-casa/commit/0f4d54a))

## [6.2.0](https://github.com/dwp/govuk-casa/compare/6.1.0...6.2.0) (2020-04-22)

### Bug Fixes

- mount static handlers on the proxy url ([eaf8062](https://github.com/dwp/govuk-casa/commit/eaf8062))

### Features

- add means to access Plan's raw graph structure ([650a0a7](https://github.com/dwp/govuk-casa/commit/650a0a7))

## [6.1.0](https://github.com/dwp/govuk-casa/compare/6.0.0...6.1.0) (2020-04-21)

### Features

- add proxyMountUrl to support proxying servers ([f8ce731](https://github.com/dwp/govuk-casa/commit/f8ce731))
- **templates:** add Google Tag Manager attributes to radio/checkboxes ([7d36f9b](https://github.com/dwp/govuk-casa/commit/7d36f9b)), closes [#116](https://github.com/dwp/govuk-casa/issues/116)

## [6.0.0](https://github.com/dwp/govuk-casa/compare/5.2.2...6.0.0) (2020-03-26)

### Code Refactoring

- change minimum NodeJS version to 12 ([6e362e1](https://github.com/dwp/govuk-casa/commit/6e362e1))

### Features

- add support for custom data model ([a8ffac5](https://github.com/dwp/govuk-casa/commit/a8ffac5)), closes [#107](https://github.com/dwp/govuk-casa/issues/107)
- add support for string interpolation in validation error messages ([e015c5c](https://github.com/dwp/govuk-casa/commit/e015c5c)), closes [#54](https://github.com/dwp/govuk-casa/issues/54)
- Adding ability to set the text of a button in a journey ([340a238](https://github.com/dwp/govuk-casa/commit/340a238))
- **test:** add utility for testing Plan traversals. ([4e69673](https://github.com/dwp/govuk-casa/commit/4e69673))
- **validation:** pass full journey context to validators and conditionals ([bc12325](https://github.com/dwp/govuk-casa/commit/bc12325)), closes [#89](https://github.com/dwp/govuk-casa/issues/89)

### BREAKING CHANGES

- All validator functions must reject with an instance of
  `ValidationError`, rather than the basic object as previously. See
  `docs/MIGRATION-5.x-6.x.md` for more details.
- A minimum of NodeJS 12.0.0 is now required to use
  CASA.
- **validation:** The apis for field validator functions, field validator conditionals
  and the Validation.processor() function, have all changed and existing codebases
  will need to be modified to continue working as expected. See MIGRATING-5.x-6.x.md
  for details on these changes.

## [5.2.2](https://github.com/dwp/govuk-casa/compare/5.2.1...5.2.2) (2020-03-16)

### Bug Fixes

- **ci:** include locale specifically when running zap ([677a575](https://github.com/dwp/govuk-casa/commit/677a575))

## [5.2.1](https://github.com/dwp/govuk-casa/compare/5.2.0...5.2.1) (2020-01-15)

### Bug Fixes

- traverse to correct page after edit if linear journey is shortened ([6d3beb2](https://github.com/dwp/govuk-casa/commit/6d3beb2))

## [5.2.0](https://github.com/dwp/govuk-casa/compare/5.1.0...5.2.0) (2019-12-05)

### Features

- stop traversal beyond a given editorigin ([9228cb5](https://github.com/dwp/govuk-casa/commit/9228cb5))

## [5.1.0](https://github.com/dwp/govuk-casa/compare/5.1.0-beta.3...5.1.0) (2019-11-08)

### Bug Fixes

- pass logger to static middleware function ([62dff0e](https://github.com/dwp/govuk-casa/commit/62dff0e))
- **session:** Ensure sessionExpiryController() has new session ([1a434a0](https://github.com/dwp/govuk-casa/commit/1a434a0))

## [5.1.0-beta.3](https://github.com/dwp/govuk-casa/compare/5.1.0-beta.2...5.1.0-beta.3) (2019-10-22)

### Bug Fixes

- Remove referer query before session timeout redirect ([31d54e8](https://github.com/dwp/govuk-casa/commit/31d54e8))

### Features

- **session:** add sessionExpiryController() config option ([c3edb27](https://github.com/dwp/govuk-casa/commit/c3edb27))

## [5.1.0-beta.2](https://github.com/dwp/govuk-casa/compare/5.1.0-beta.1...5.1.0-beta.2) (2019-10-21)

### Bug Fixes

- **traversal:** inject correct origin when calculating altered route after edit ([0c84170](https://github.com/dwp/govuk-casa/commit/0c84170))
- **validator:** add type checking to email validator ([57de412](https://github.com/dwp/govuk-casa/commit/57de412))

## [5.1.0-beta.1](https://github.com/dwp/govuk-casa/compare/5.0.1...5.1.0-beta.1) (2019-10-20)

### Bug Fixes

- Don’t use "footer" element to wrap form buttons ([ca91fae](https://github.com/dwp/govuk-casa/commit/ca91fae))
- Update e-mail validation ([28cd300](https://github.com/dwp/govuk-casa/commit/28cd300))
- use correct logger in skip middleware ([66360a3](https://github.com/dwp/govuk-casa/commit/66360a3))
- **gather:** ensure gathered state is set for solely optional forms ([039fb94](https://github.com/dwp/govuk-casa/commit/039fb94))
- **plan:** take into account route conditions when calculating previous waypoint ([41e2208](https://github.com/dwp/govuk-casa/commit/41e2208))

### Features

- add functionality to convert from map to plan ([d98e055](https://github.com/dwp/govuk-casa/commit/d98e055))

### Performance Improvements

- **plan:** add option to stop traversal early when conditions are met ([c4ab26e](https://github.com/dwp/govuk-casa/commit/c4ab26e))

## [5.0.1](https://github.com/dwp/govuk-casa/compare/5.0.0...5.0.1) (2019-09-08)

### Bug Fixes

- strip invalid characters from editorigin ([0a9d8a8](https://github.com/dwp/govuk-casa/commit/0a9d8a8))

## [5.0.0](https://github.com/dwp/govuk-casa/compare/5.0.0-alpha.4...5.0.0) (2019-08-15)

### Features

- Upgrade to GOV.UK Frontend 3.0.0 ([e986a56](https://github.com/dwp/govuk-casa/commit/e986a56))
- add support for hooks as arrays ([047ed46](https://github.com/dwp/govuk-casa/commit/047ed46))
- implement graph data structure for handling journey traversals ([9f1d920](https://github.com/dwp/govuk-casa/commit/9f1d920))

### Bug Fixes

- stop traversal once a loop is encountered ([33ce8f6](https://github.com/dwp/govuk-casa/commit/33ce8f6))

### Code Refactoring

- rename variables and change references to request variables ([2b76135](https://github.com/dwp/govuk-casa/commit/2b76135))

### BREAKING CHANGES

- GOVUK Frontend - See all changes documented in <https://github.com/alphagov/govuk-frontend/releases/tag/v3.0.0>
- All existing references to `req.*` casa variables will need to be modified.
- The UserJourney.\* classes are no longer supported and existing journey
  definitions will need to be modified to use the new `Plan` class.

## [4.0.5](https://github.com/dwp/govuk-casa/compare/4.0.4...4.0.5) (2019-07-24)

## [4.0.4](https://github.com/dwp/govuk-casa/compare/4.0.3...4.0.4) (2019-07-13)

## [4.0.3](https://github.com/dwp/govuk-casa/compare/4.0.2...4.0.3) (2019-07-01)

## [4.0.2](https://github.com/dwp/govuk-casa/compare/4.0.1...4.0.2) (2019-05-28)

### Bug Fixes

- **journey:** obey conditional on very first waypoint in journey ([4145df0](https://github.com/dwp/govuk-casa/commit/4145df0)), closes [#60](https://github.com/dwp/govuk-casa/issues/60)

## [4.0.1](https://github.com/dwp/govuk-casa/compare/4.0.0...4.0.1) (2019-05-24)

### Code Refactoring

- whitelist fields with validators for session ingestion ([57e4c95](https://github.com/dwp/govuk-casa/commit/57e4c95)), closes [#38](https://github.com/dwp/govuk-casa/issues/38)

### Features

- **review:** use govukSummaryList component for Check Answers screen ([e97462c](https://github.com/dwp/govuk-casa/commit/e97462c))

### BREAKING CHANGES

- **review:** Any services using the current layout will need to
  modify review block template for each individual page in their service.
- Where previously field validators were optional, they
  are now mandatory if the data submitted for those fields is required to
  be ingested into the CASA session.

## [4.0.0](https://github.com/dwp/govuk-casa/compare/3.0.1...4.0.0) (2019-05-17)

### Features

- **session:** pass referer url in session-timeout redirect ([7e0b3d0](https://github.com/dwp/govuk-casa/commit/7e0b3d0)), closes [#56](https://github.com/dwp/govuk-casa/issues/56)

### Performance Improvements

- **nunjucks:** improve performance of template rendering and loading ([0838fbc](https://github.com/dwp/govuk-casa/commit/0838fbc))

### BREAKING CHANGES

- **nunjucks:** Macros now require access to the same scope as the
  templates being rendered, so must be imported with context. See
  docs/MIGRATING-3.x-4.x.md

## [3.0.1](https://github.com/dwp/govuk-casa/compare/3.0.0...3.0.1) (2019-05-09)

## [3.0.0](https://github.com/dwp/govuk-casa/compare/2.4.2...3.0.0) (2019-05-02)

### Bug Fixes

- **security:** remove 'unsafe-inline' from script src in CSP header ([e6a4fbd](https://github.com/dwp/govuk-casa/commit/e6a4fbd))
- **security:** set x-xss-protection header to `1; mode=block` ([9824762](https://github.com/dwp/govuk-casa/commit/9824762))

### Code Refactoring

- remove sass and uglify; compile assets at build time ([97c2ceb](https://github.com/dwp/govuk-casa/commit/97c2ceb))
- remove v1 macros and CSS ([40a419a](https://github.com/dwp/govuk-casa/commit/40a419a))

### Features

- add support for `report-uri` and `report-to` CSP directives ([2616f44](https://github.com/dwp/govuk-casa/commit/2616f44))
- add support for mulitple user journey maps ([c56211b](https://github.com/dwp/govuk-casa/commit/c56211b))

### Performance Improvements

- some small performance improvements to headers middleware ([4831264](https://github.com/dwp/govuk-casa/commit/4831264))

### BREAKING CHANGES

- If your service relies on CASA running sass/uglify
  compilation at boot-time, this will no longer be the case and your
  sources will need to be compiled in an alternative way.

Signed-off-by: james.gauld <james.gauld@engineering.digital.dwp.gov.uk>

- Any templates using the v1 macros or CSS/Sass rules
  will need to migrate to using latest equivalents. See
  docs/MIGRARTING-2.x-3.x.md for more details.

Signed-off-by: james.gauld <james.gauld@engineering.digital.dwp.gov.uk>

- **security:** Having 'unsafe-inline' set by default in the CSP header
  prevents protection against XSS attacks by allowing any inline JS to be
  executed in the browser. I'm removing this in favour of developers
  explicitly allowing each inline script block.

Signed-off-by: Niall Molloy <niall.molloy@engineering.digital.dwp.gov.uk>

- The review page page is no longer automatically added and
  must now be manually defined in page meta config. Conditional waypoint syntax
  change.

Signed-off-by: james.gauld <james.gauld@engineering.digital.dwp.gov.uk>

## [2.4.2](https://github.com/dwp/govuk-casa/compare/2.4.1...2.4.2) (2019-04-10)

### Bug Fixes

- error link hrefs ([eafe887](https://github.com/dwp/govuk-casa/commit/eafe887)), closes [#49](https://github.com/dwp/govuk-casa/issues/49)
- **gather-modifier:** postcode reformatting accessibility changes ([f291509](https://github.com/dwp/govuk-casa/commit/f291509))
- udpate csp options docs ([e618bb5](https://github.com/dwp/govuk-casa/commit/e618bb5))
- **validation:** dateObject before/after offset comparison ([6153995](https://github.com/dwp/govuk-casa/commit/6153995))

### Features

- **static:** back to the future fix ([49353d0](https://github.com/dwp/govuk-casa/commit/49353d0))

## [2.4.1](https://github.com/dwp/govuk-casa/compare/2.4.0...2.4.1) (2019-03-20)

### Performance Improvements

- **memory:** remove potential source of memory leaks ([7dd658d](https://github.com/dwp/govuk-casa/commit/7dd658d))

## [2.4.0](https://github.com/dwp/govuk-casa/compare/2.3.1...2.4.0) (2019-03-05)

### Bug Fixes

- Update typo on documentation for NINO ([9e73565](https://github.com/dwp/govuk-casa/commit/9e73565))

### Features

- **middleware:** allow extra middleware from config ([61db293](https://github.com/dwp/govuk-casa/commit/61db293))

## [2.3.1](https://github.com/dwp/govuk-casa/compare/2.3.0...2.3.1) (2019-02-14)

## [2.3.0](https://github.com/dwp/govuk-casa/compare/2.2.2...2.3.0) (2019-02-13)

### Bug Fixes

- check compiled assets dir exists ([6e34562](https://github.com/dwp/govuk-casa/commit/6e34562))
- **accessibility:** apply correct error highlighting and linking ([08cb9a8](https://github.com/dwp/govuk-casa/commit/08cb9a8))
- **validation:** fix to the postcode regex ([8f4f2c0](https://github.com/dwp/govuk-casa/commit/8f4f2c0))
- handle userland journey errors ([fcb7842](https://github.com/dwp/govuk-casa/commit/fcb7842))
- sass compilation on Windows ([3af3794](https://github.com/dwp/govuk-casa/commit/3af3794))
- update class name in form helper to be more explicit ([70a0433](https://github.com/dwp/govuk-casa/commit/70a0433))

### Features

- **negative regex:** add negative regex ([ddad066](https://github.com/dwp/govuk-casa/commit/ddad066))
- **postal address:** visually group address lines 1 & 2 together ([dcea90f](https://github.com/dwp/govuk-casa/commit/dcea90f))
- protect against double-submission of journey form ([a366777](https://github.com/dwp/govuk-casa/commit/a366777))
- update journey-form to allow removing footer ([dd9801e](https://github.com/dwp/govuk-casa/commit/dd9801e))

## [2.2.2](https://github.com/dwp/govuk-casa/compare/2.2.1...2.2.2) (2019-01-18)

### Bug Fixes

- **postcode-validation:** replace post code validator with a better one ([62280b2](https://github.com/dwp/govuk-casa/commit/62280b2))
- **validation:** allow numeric first line address ([470d9df](https://github.com/dwp/govuk-casa/commit/470d9df))

## [2.2.1](https://github.com/dwp/govuk-casa/compare/2.1.1...2.2.1) (2018-12-20)

### Features

- **data gatherers:** add support for gather modifiers ([23f9afc](https://github.com/dwp/govuk-casa/commit/23f9afc))
- **validation:** update nino validation rule with allowWhitespace flag ([5a4e01a](https://github.com/dwp/govuk-casa/commit/5a4e01a))

## 2.1.1 (2018-10-27)
